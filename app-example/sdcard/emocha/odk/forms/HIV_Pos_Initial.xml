<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" 
				xmlns:h="http://www.w3.org/1999/xhtml" 
				xmlns:ev="http://www.w3.org/2001/xml-events" 
				xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
				xmlns:jr="http://openrosa.org/javarosa">
	<h:head>
		<h:title>HIV Positive initial</h:title>
		
		<model>			
			<itext>
			  <translation lang="English">
			    <text id="scheduled_fu_visit_date">
			      <value>Skip if no visit scheduled</value>
			    </text>
			    <text id="scheduled_fu_partner_date">
			      <value>Skip if no visit scheduled</value>
			    </text>
			    <text id="stay_healthy">
			      <value>Ways to stay healthy: abstain, use condoms HIV-/unknowns, use family planning, get PMTCT Septrin, care pkg, places for help. (When ready, slide to the next screen)</value>
			    </text>
			    <text id="knew_had_HIV_when">
			      <value>Skip if doesn't know</value>
			    </text>
			  </translation>
			</itext>
			<instance>
				<data>
			        <meta>
						<form_name>HIV Pos Initial</form_name>
						<form_version>0.0.3</form_version>
						<start/>
						<end/>
						<today/>
						<device_id/>
						<subscriber_id/>
						<sim_id/>
					</meta>
					
					<intro />
					
					<knew_had_HIV />
					<knew_had_HIV_when />
					<visited_HIV_clinic />
					<difficulties_visiting_clinic />
					<why_not_visited_clinic />
					
					<received_BCP />
					<received_BCP_when />
					<did_CD4_test />
					<CD4_count />
					<taking_Sep_Ctmx />
					<taking_ARVs />
					<taking_ARVs_amount />
					
					<knows_HIV_clinics />
					<discussed_care_options />
					<will_visit_clinic />
					<why_wont_visit_clinic />
					
					<provided_referral />
					<referral_ID />
					<explained_CD4 />
					<scheduled_fu_visit_done />
					<scheduled_fu_visit_date />
					<explained_partner_test />
					<scheduled_fu_partner_done />
					<scheduled_fu_partner_date />
					
					<emocha_data>
						<phone_id />										
						<village_code />
						<household_code />
						<patient_code />										
						<referral_done />										
					</emocha_data>
				</data>
			</instance>
			
			<bind nodeset="/data/meta/start" type="dateTime" jr:preload="timestamp" jr:preloadParams="start"/>
			<bind nodeset="/data/meta/end" type="dateTime" jr:preload="timestamp" jr:preloadParams="end"/>
			<bind nodeset="/data/meta/today" type="date" jr:preload="date" jr:preloadParams="today"/>
			<bind nodeset="/data/meta/device_id" type="string" jr:preload="property" jr:preloadParams="deviceid"/>
			<bind nodeset="/data/meta/subscriber_id" type="string" jr:preload="property" jr:preloadParams="subscriberid"/>
			<bind nodeset="/data/meta/sim_id" type="string" jr:preload="property" jr:preloadParams="simserial"/>
			
			<bind nodeset="/data/intro" type="string" readonly="true()" />

			<!-- Questions -->
			<bind nodeset="/data/knew_had_HIV" required="true()" type="string" />
			<bind nodeset="/data/knew_had_HIV_when" required="true()" type="date" 
				relevant="/data/knew_had_HIV = '1'" />
			<bind nodeset="/data/visited_HIV_clinic" required="true()" type="string" 
				relevant="/data/knew_had_HIV = '1'" />
			<bind nodeset="/data/difficulties_visiting_clinic" required="true()" type="string" 
				relevant="/data/visited_HIV_clinic = '1'" 
				constraint="count-selected(.) &lt;= 1 or not(selected(., '77') or selected(., '99'))" 
				jr:constraintMsg="only 1 option can be set when declined or doesn't know" />
				
			<bind nodeset="/data/why_not_visited_clinic" required="true()" type="string" 
				relevant="/data/visited_HIV_clinic != '' and /data/visited_HIV_clinic != '1'" 
				constraint="count-selected(.) &lt;= 1 or not(selected(., '77') or selected(., '99'))" 
				jr:constraintMsg="only 1 option can be set when declined or doesn't know" />
			
			<bind nodeset="/data/received_BCP" required="true()" type="string" 
				relevant="/data/knew_had_HIV = '1'" />
			<bind nodeset="/data/received_BCP_when" required="true()" type="string" 
				relevant="/data/received_BCP = '1'" />
			<bind nodeset="/data/did_CD4_test" required="true()" type="string" 
				relevant="/data/knew_had_HIV = '1'" />
			<bind nodeset="/data/CD4_count" required="true()" type="string" 
				relevant="/data/did_CD4_test = '1'" />
			<bind nodeset="/data/taking_Sep_Ctmx" required="true()" type="string" 
				relevant="/data/knew_had_HIV = '1'" />
			<bind nodeset="/data/taking_ARVs" required="true()" type="string" 
				relevant="/data/knew_had_HIV = '1'" />
			<bind nodeset="/data/taking_ARVs_amount" required="true()" type="string" 
				relevant="/data/taking_ARVs = '1'" />
			
			<bind nodeset="/data/knows_HIV_clinics" required="true()" type="string" 
				relevant="/data/knew_had_HIV != '1'" />
			<bind nodeset="/data/discussed_care_options" required="true()" type="string" 
				relevant="/data/knew_had_HIV != '1'" />
			<bind nodeset="/data/will_visit_clinic" required="true()" type="string" 
				relevant="/data/knew_had_HIV != '1'" />
			<bind nodeset="/data/why_wont_visit_clinic" required="true()" type="string" 
				relevant="/data/will_visit_clinic != '' and /data/will_visit_clinic != '2'" />
			
			<bind nodeset="/data/provided_referral" required="true()" type="string" />
			<bind nodeset="/data/referral_ID" required="true()" type="string" />
			<bind nodeset="/data/explained_CD4" required="true()" type="string" />
			<bind nodeset="/data/scheduled_fu_visit_date" required="false()" type="date" 
				constraint=". &gt;= today()" 
				jr:constraintMsg="only future dates allowed" />
			<bind nodeset="/data/scheduled_fu_visit_done" type="string" 
				calculate="if(/data/scheduled_fu_visit_date &gt; today(), '1', '0')" />
			<bind nodeset="/data/explained_partner_test" required="true()" type="string" />
			<bind nodeset="/data/scheduled_fu_partner_date" required="false()" type="date" 
				constraint=". &gt;= today()" 
				jr:constraintMsg="only future dates allowed" />
			<bind nodeset="/data/scheduled_fu_partner_done" type="string" 
				calculate="if(/data/scheduled_fu_partner_date &gt; today(), '1', '0')" />
			
			<!-- emocha related data -->
			<bind nodeset="/data/emocha_data/phone_id" type="int" calculate="-1" />
			<bind nodeset="/data/emocha_data/village_code" type="int" calculate="-1" />
			<bind nodeset="/data/emocha_data/household_code" type="string" calculate="-1" />
			<bind nodeset="/data/emocha_data/patient_code" type="string" calculate="-1" />
			<bind nodeset="/data/emocha_data/referral_done" type="int" calculate="0" />
			<!-- end emocha data-->
		</model>
	</h:head>
	<h:body>
		<input ref="/data/intro">
			<label>Your test is positive. You have HIV.</label>
			<hint ref="jr:itext('stay_healthy')"></hint>
		</input>
	
		<select1 ref="knew_had_HIV">
			<label>Did you know before today that you had HIV?</label>	
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<input ref="knew_had_HIV_when">
			<label>When did you first find out you had the HIV virus?</label>	
			<hint ref="jr:itext('knew_had_HIV_when')"></hint>
		</input>

		<select1 ref="visited_HIV_clinic">
			<label>Have you ever visited an HIV care clinic?</label>	
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select ref="difficulties_visiting_clinic">
			<label>What, if any difficulties, did you encounter getting to the clinic?</label>	
			<item><value>1</value><label>Too busy</label></item>
			<item><value>2</value><label>Not enough money for transport</label></item>
			<item><value>3</value><label>I don't want anyone to see me there</label></item>
			<item><value>4</value><label>I haven't encountered any difficulties</label></item>
			<item><value>5</value><label>Other</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select>

		<select ref="why_not_visited_clinic">
			<label>What has stopped you from going to the HIV care clinic?</label>	
			<item><value>1</value><label>Too busy</label></item>
			<item><value>2</value><label>Not enough money for transport</label></item>
			<item><value>3</value><label>I don't want anyone to see me going there</label></item>
			<item><value>4</value><label>I haven't encountered any difficulties</label></item>
			<item><value>5</value><label>Other</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select>


		<select1 ref="received_BCP">
			<label>Have you ever received a basic care package?</label>	
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="received_BCP_when">
			<label>When did you receive your BCP?</label>	
			<item><value>1</value><label>three to six months ago</label></item>
			<item><value>2</value><label>seven to twelve months ago</label></item>
			<item><value>3</value><label>more than 12 months ago</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="did_CD4_test">
			<label>Have you ever had a test of your CD4 count?</label>	
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="CD4_count">
			<label>When was the last test of your CD4 count?</label>	
			<item><value>1</value><label>three to six months ago</label></item>
			<item><value>2</value><label>seven to twelve months ago</label></item>
			<item><value>3</value><label>more than 12 months ago</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="taking_Sep_Ctmx">
			<label>Are you taking Septrin of Cotrimoxazole?</label>	
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="taking_ARVs">
			<label>Are you taking ARVs (antiretroviral medication or medication for AIDS?)</label>	
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="taking_ARVs_amount">
			<label>In the last 30 days, how much of your prescribed medication have you taken?</label>	
			<item><value>1</value><label>All of it</label></item>
			<item><value>2</value><label>Most of it</label></item>
			<item><value>3</value><label>Some of it</label></item>
			<item><value>4</value><label>None of it</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>




		<select1 ref="knows_HIV_clinics">
			<label>Do you know of any HIV care clinics near your home?	</label>
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="discussed_care_options">
			<label>Discuss/review options for care</label>
			<item><value>0</value><label>Not done</label></item>
			<item><value>1</value><label>Done</label></item>
		</select1>

		<select1 ref="will_visit_clinic">
			<label>Do you think you will visit a care clinic?</label>	
			<item><value>0</value><label>Don't see a need</label></item>
			<item><value>1</value><label>Might be good, but I'm not ready to do it</label></item>
			<item><value>2</value><label>I plan to do it</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="why_wont_visit_clinic">
			<label>What is the main reason you do not plan to visit a care clinic?</label>	
			<item><value>1</value><label>Too busy</label></item>
			<item><value>2</value><label>Don't know where to go</label></item>
			<item><value>3</value><label>Not enough money for transport</label></item>
			<item><value>4</value><label>Staff won't treat me with respect</label></item>
			<item><value>5</value><label>I don't want anyone to see me</label></item>
			<item><value>6</value><label>Other</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>





		<select1 ref="provided_referral">
			<label>Provide referral as appropriate</label>	
			<item><value>0</value><label>Not done</label></item>
			<item><value>1</value><label>Done</label></item>
		</select1>

		<input ref="referral_ID">
			<label>Enter referral serial ID</label>	
		</input>

		<select1 ref="explained_CD4">
			<label>Explain CD4 blood draw and draw blood</label> 	
			<item><value>0</value><label>Not done</label></item>
			<item><value>1</value><label>Done</label></item>
		</select1>

		<input ref="scheduled_fu_visit_date">
			<label>Schedule follow-up visit</label>	
			<hint ref="jr:itext('scheduled_fu_visit_date')"></hint>
		</input>

		<select1 ref="explained_partner_test">
			<label>If individual has sexual partner not present, emphasize importance of testing partner</label>	
			<item><value>0</value><label>Not done</label></item>
			<item><value>1</value><label>Done</label></item>
		</select1>

		<input ref="scheduled_fu_partner_date">
			<label>Schedule follow-up visit for partner that is not present</label>	
			<hint ref="jr:itext('scheduled_fu_partner_date')"></hint>
		</input>


	</h:body>
</h:html>
