<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" 
				xmlns:h="http://www.w3.org/1999/xhtml" 
				xmlns:ev="http://www.w3.org/2001/xml-events" 
				xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
				xmlns:jr="http://openrosa.org/javarosa">
	<h:head>
		<h:title>Circumcision initial</h:title>
		
		<model>			
			<itext>
			  <translation lang="English">
			    <text id="scheduled_fu_visit_date">
			      <value>Skip if no visit scheduled</value>
			    </text>
			    <text id="give_circum_info">
			      <value>When ready, slide to the next screen</value>
			    </text>
			  </translation>
			</itext>
			<instance>
				<data>
			        <meta>
						<form_name>Circ Initial</form_name>
						<form_version>0.0.3</form_version>
						<start/>
						<end/>
						<today/>
						<device_id/>
						<subscriber_id/>
						<sim_id/>
					</meta>
					
					<heard_circum_effects />
					<heard_circum_effects_where />
					<considered_circum />
					<what_prevented_circum />
					<give_circum_info />
					<expects_days_off />
					<knows_circum_facility />
					<give_counseling />
					<is_considering_circum_after_info />
					<what_could_prevent_circum />
					<why_not_planning_circum />
					<provide_referral />
					<referral_ID />
					<scheduled_fu_visit_done />
					<scheduled_fu_visit_date />

					<emocha_data>
						<phone_id />										
						<village_code />
						<household_code />
						<patient_code />										
						<referral_done />										
					</emocha_data>
				</data>
			</instance>

			<bind nodeset="/data/meta/start" type="dateTime" jr:preload="timestamp" jr:preloadParams="start"/>
			<bind nodeset="/data/meta/end" type="dateTime" jr:preload="timestamp" jr:preloadParams="end"/>
			<bind nodeset="/data/meta/today" type="date" jr:preload="date" jr:preloadParams="today"/>
			<bind nodeset="/data/meta/device_id" type="string" jr:preload="property" jr:preloadParams="deviceid"/>
			<bind nodeset="/data/meta/subscriber_id" type="string" jr:preload="property" jr:preloadParams="subscriberid"/>
			<bind nodeset="/data/meta/sim_id" type="string" jr:preload="property" jr:preloadParams="simserial"/>

			<!-- Questions -->
			
			<bind nodeset="/data/heard_circum_effects" required="true()" type="string" />
			
			<bind nodeset="/data/heard_circum_effects_where" required="true()" type="string" 
				relevant="/data/heard_circum_effects = '1'"
				constraint="count-selected(.) &lt;= 1 or not(selected(., '77') or selected(., '99'))" 
				jr:constraintMsg="only 1 option can be set when declined or doesn't know" />
				
			<bind nodeset="/data/considered_circum" required="true()" type="string" 
				relevant="/data/heard_circum_effects = '1'" />

			<bind nodeset="/data/what_prevented_circum" required="true()" type="string" 
				relevant="/data/heard_circum_effects = '1'"
				constraint="count-selected(.) &lt;= 1 or not(selected(., '77') or selected(., '99'))" 
				jr:constraintMsg="only 1 option can be set when declined or doesn't know" />				
			
			<bind nodeset="/data/give_circum_info" required="false()" readonly="true()" type="string" 
				relevant="/data/heard_circum_effects != '1'" />
			
			<bind nodeset="/data/expects_days_off" required="true()" type="int" />
			<bind nodeset="/data/knows_circum_facility" required="true()" type="string" />
			<bind nodeset="/data/give_counseling" required="true()" type="string" />
			<bind nodeset="/data/is_considering_circum_after_info" required="true()" type="string" />
			
			<bind nodeset="/data/what_could_prevent_circum" required="true()" type="string" 
				relevant="/data/is_considering_circum_after_info = '2'"
				constraint="count-selected(.) &lt;= 1 or not(selected(., '77') or selected(., '99'))" 
				jr:constraintMsg="only 1 option can be set when declined or doesn't know" />
			
			<bind nodeset="/data/why_not_planning_circum" required="true()" type="string" 
				relevant="/data/is_considering_circum_after_info != '2'"
				constraint="count-selected(.) &lt;= 1 or not(selected(., '77') or selected(., '99'))" 
				jr:constraintMsg="only 1 option can be set when declined or doesn't know" />
			
			<bind nodeset="/data/provide_referral" required="true()" type="string" />
			<bind nodeset="/data/referral_ID" required="true()" type="string" />

			<bind nodeset="/data/scheduled_fu_visit_date" required="false()" type="date" 
				constraint=". &gt;= today()" 
				jr:constraintMsg="only future dates allowed" />
			<bind nodeset="/data/scheduled_fu_visit_done" type="string" 
				calculate="if(/data/scheduled_fu_visit_date &gt; today(), '1', '0')" />
			
			<!-- emocha related data -->
			<bind nodeset="/data/emocha_data/phone_id" type="int" calculate="-1" />
			<bind nodeset="/data/emocha_data/village_code" type="int" calculate="-1" />
			<bind nodeset="/data/emocha_data/household_code" type="string" calculate="-1" />
			<bind nodeset="/data/emocha_data/patient_code" type="string" calculate="-1" />
			<bind nodeset="/data/emocha_data/referral_done" type="int" calculate="0" />
			<!-- end emocha data-->
		</model>
	</h:head>
	<h:body>
		<select1 ref="heard_circum_effects">
			<label>Had you heard before today that circumcising men could reduce their changes of getting HIV?</label>
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select ref="heard_circum_effects_where">
			<label>How did you learn about this information?</label>
			<item><value>1</value><label>Radio</label></item>
			<item><value>2</value><label>Television</label></item>
			<item><value>3</value><label>Drama</label></item>
			<item><value>4</value><label>Newspapers/magazines</label></item>
			<item><value>5</value><label>Brochures</label></item>
			<item><value>6</value><label>Posters</label></item>
			<item><value>7</value><label>Billboards</label></item>
			<item><value>8</value><label>Community notices</label></item>
			<item><value>9</value><label>Family</label></item>
			<item><value>10</value><label>My partner</label></item>
			<item><value>11</value><label>Friends</label></item>
			<item><value>12</value><label>Health workers</label></item>
			<item><value>13</value><label>Political leaders</label></item>
			<item><value>14</value><label>Traditional leaders</label></item>
			<item><value>15</value><label>Religious leaders</label></item>
			<item><value>16</value><label>Health education seminars</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select>

		<select1 ref="considered_circum">
			<label>Have you ever considered getting circumcised to reduce your chance of getting HIV?</label>
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select ref="what_prevented_circum">
			<label>What factors have prevented you from getting circumcised?</label>	
			<item><value>1</value><label>Cost of the procedure</label></item>
			<item><value>2</value><label>Cost of transportation</label></item>
			<item><value>3</value><label>Fear of pain</label></item>
			<item><value>4</value><label>Cultural norms</label></item>
			<item><value>5</value><label>Religion</label></item>
			<item><value>6</value><label>Fear of complications</label></item>
			<item><value>7</value><label>No service at near health facility close to here</label></item>
			<item><value>8</value><label>Don't have time</label></item>
			<item><value>9</value><label>Loss of work</label></item>
			<item><value>10</value><label>Don't feel like I'm high risk for HIV infection</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select>

		<input ref="give_circum_info">
			<label>Since you have not heard about circumcision before today, I will give you some more information.  First, I will ask you some questions, so that I know what information to provide you with.</label>
			<hint ref="jr:itext('give_circum_info')"></hint>
		</input>


		<input ref="expects_days_off">
			<label>How many days off of work do you expect to take if you were to be circumcised?</label>
		</input>

		<select1 ref="knows_circum_facility">
			<label>Do you know of any health facilities that do circumcision near your home?</label>
			<item><value>0</value><label>No</label></item>
			<item><value>1</value><label>Yes</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select1 ref="give_counseling">
			<label>Provide information/counseling based on disussion</label>
			<item><value>0</value><label>Not done</label></item>
			<item><value>1</value><label>Done</label></item>
		</select1>

		<select1 ref="is_considering_circum_after_info">
			<label>Based on the information we have discussed about cirumcision today, are you considering getting circumcised?</label>
			<item><value>0</value><label>Don't see a need</label></item>
			<item><value>1</value><label>Might be good, but I'm not ready to do it</label></item>
			<item><value>2</value><label>I plan to do it</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select1>

		<select ref="what_could_prevent_circum">
			<label>What do you think could prevent you from getting circumcised?</label>
			<item><value>1</value><label>Cost of the procedure</label></item>
			<item><value>2</value><label>Cost of transportation</label></item>
			<item><value>3</value><label>Fear of pain</label></item>
			<item><value>4</value><label>Cultural norms</label></item>
			<item><value>5</value><label>Religion</label></item>
			<item><value>6</value><label>Fear of complications</label></item>
			<item><value>7</value><label>No service at near health facility</label></item>
			<item><value>8</value><label>Don't have time</label></item>
			<item><value>9</value><label>Loss of work</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select>

		<select ref="why_not_planning_circum">
			<label>Why aren't you planning to get circumcised?</label>
			<item><value>1</value><label>Cost of the procedure</label></item>
			<item><value>2</value><label>Cost of transportation</label></item>
			<item><value>3</value><label>Fear of pain</label></item>
			<item><value>4</value><label>Cultural norms</label></item>
			<item><value>5</value><label>Religion</label></item>
			<item><value>6</value><label>Fear of complications</label></item>
			<item><value>7</value><label>No service at near health facility</label></item>
			<item><value>8</value><label>Don't have time</label></item>
			<item><value>9</value><label>Loss of work</label></item>
			<item><value>10</value><label>Don't feel like I'm high risk</label></item>
			<item><value>77</value><label>Don't know</label></item>
			<item><value>99</value><label>Declined to answer</label></item>
		</select>

		<select1 ref="provide_referral">
			<label>Provide referral</label>
			<item><value>0</value><label>Not done</label></item>
			<item><value>1</value><label>Done</label></item>
		</select1>

		<input ref="referral_ID">
			<label>Enter referral serial ID number</label>	
		</input>

		<input ref="scheduled_fu_visit_date">
			<label>Schedule follow-up visit</label>
			<hint ref="jr:itext('scheduled_fu_visit_date')"></hint>
		</input>

	</h:body>
</h:html>
